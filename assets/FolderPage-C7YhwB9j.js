const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OpenCycleMap-CFXqm85u.js","assets/index-C8h-BEVG.js","assets/index-B66Uxe8-.css","assets/OpenCycleMap-CIGW-MKW.css","assets/ElevationGraph-CQrYcKW0.js"])))=>i.map(i=>d[i]);
import{j as e,u as c,a as j,r as d,N as u,R as m,_ as x}from"./index-C8h-BEVG.js";import{u as g}from"./store-thJBia-R.js";const p=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})});function f({waypoint:s,hideMilestoneData:t,Icon:i,lastNode:l=!1}){var a;return e.jsxs("li",{style:{marginBottom:"-4pt"},children:[e.jsx("div",{className:"timeline-middle",children:i}),e.jsxs("div",{className:"timeline-end text-left flex flex-row gap-x-2 px-2 pt-2 m-0",children:[t?e.jsx(e.Fragment,{}):e.jsx("time",{className:"flex-none w-10",children:s.milestone>=1e3?`${(s.milestone/1e3).toFixed(0)}km`:"Start"}),e.jsxs("div",{className:"grow text-lg leading-tight",children:[e.jsx("span",{className:"font-bold",children:s.name}),(a=s.description)==null?void 0:a.split("<br>").map((r,n)=>e.jsx("p",{children:r},s.coordinates.toString()+n))]})]}),l?e.jsx(e.Fragment,{}):e.jsx("hr",{style:{zIndex:"-500",marginTop:"2pt",height:"110%"}})]})}function h({waypoints:s,styles:t}){const i=s.filter(l=>l.milestone>1e3).length<=0;return e.jsx("ul",{className:"timeline timeline-vertical timeline-snap-icon timeline-compact",children:s.sort((l,a)=>l.milestone_index-a.milestone_index).map((l,a,r)=>{let n=e.jsx(p,{});const o=`${l.style}-normal`;return o in t&&(n=e.jsx("img",{src:t[o].iconUrl,width:25,height:25})),e.jsx(f,{waypoint:l,hideMilestoneData:i,Icon:n,lastNode:a+1>=r.length},l.coordinates.toString())})})}function b({folder:s,selectedId:t}){const i=c(),l=g(a=>a.kml.folders.map(r=>r.name));return e.jsxs("div",{className:"dropdown dropdown-end w-full",children:[e.jsx("div",{tabIndex:0,role:"button",className:"btn h-auto w-full bg-transparent justify-start text-start p-2 m-0 mb-2 print:p-0 print:pl-2 print:border-none print:shadow-none",children:e.jsx("p",{className:"text-2xl font-bold",children:s.name})}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-1 menu p-2 bg-base-100 rounded-box w-full",children:l.map((a,r)=>e.jsx("li",{children:e.jsx("a",{onClick:()=>i(`/folder/${r}`),className:t===r?"font-bold":"",children:a})},a))})]})}const N={background:"bg-white"},v={background:"bg-white"},w=s=>{let t="";const i=Math.floor(s/60/60);t+=i+"h";const l=Math.floor(s/60-i*60);return t+=" "+l+"m",t},k=({path:s,theme:t})=>{let i=v;return t=="light"&&(i=N),!s||(s==null?void 0:s.statistics.total_distance)<1e3?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"badges flex-wrap w-full text-left print:text-start space-x-1",children:[s!=null&&s.statistics.duration&&(s==null?void 0:s.statistics.duration)>300?e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Fahrtdauer",children:e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${i.background}`,children:[e.jsx("i",{className:"fa-solid fa-clock"}),e.jsx("span",{children:w(s==null?void 0:s.statistics.duration)})]})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Distanz",children:e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${i.background}`,children:[e.jsx("i",{className:"fa-solid fa-road"}),e.jsxs("span",{children:[((s==null?void 0:s.statistics.total_distance)/1e3).toFixed(1),"km"]})]})}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Höhenmeter (Anstieg)",children:e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${i.background}`,children:[e.jsx("i",{className:"fa-solid fa-arrow-up"}),e.jsxs("span",{children:[s==null?void 0:s.statistics.climb.toFixed(0),"m"]})]})}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Höhenmeter (Abstieg)",children:e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${i.background}`,children:[e.jsx("i",{className:"fa-solid fa-arrow-down"}),e.jsxs("span",{children:[s==null?void 0:s.statistics.fall.toFixed(0),"m"]})]})}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Maximale Steigung",children:e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${i.background}`,children:[e.jsx("i",{className:"fa-solid fa-stairs"}),e.jsxs("span",{children:[((s==null?void 0:s.statistics.max_gradient)*100).toFixed(0),"%"]})]})})]})},y=m.lazy(()=>x(()=>import("./OpenCycleMap-CFXqm85u.js"),__vite__mapDeps([0,1,2,3]))),_=m.lazy(()=>x(()=>import("./ElevationGraph-CQrYcKW0.js"),__vite__mapDeps([4,1,2])));function S(){const{folderId:s}=j();c();const[t,i,l]=g(n=>n.kml?[n.kml.folders[Number(s)],n.kml.folders.map(o=>o.path),n.kml.styles]:[void 0,void 0,void 0]);let[a,r]=d.useState(!0);return t?e.jsx("div",{className:"flex flex-row justify-center h-screen w-screen",children:e.jsxs("div",{className:"grid grid-cols-2 print:grid-cols-1 gap-10 aspect-a4-landscape",children:[e.jsx("div",{className:"print:hidden grid-1",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"grid content-center justify-center",children:e.jsx("span",{className:"loading loading-ring loading-lg content-center align-middle"})}),children:e.jsx(y,{folder:t,paths:i,selectedWaypoint:t.waypoints[0],styles:l})})}),e.jsxs("div",{className:"grid-1",children:[e.jsxs("div",{className:"m-0 mb-2 mt-2 justify-start text-start",children:[e.jsx(b,{folder:t,selectedId:Number(s)}),e.jsx(k,{path:t.path,theme:"light"})]}),t.path&&a?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-40 w-full mb-10",children:e.jsx(_,{path:t.path,waypoints:t.waypoints,styles:l})})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"print:ml-2",children:e.jsx(h,{waypoints:t.waypoints,styles:l})})]}),e.jsx("div",{className:"absolute bottom-5 right-5 print:hidden",children:e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0,onChange:n=>r(n.target.checked)}),e.jsx("span",{className:"pl-2 font-semibold",children:"Höhenprofil anzeigen"})]})})]})}):e.jsx(u,{to:"/"})}export{S as FolderPage};
