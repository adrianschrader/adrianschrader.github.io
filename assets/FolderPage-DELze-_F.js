const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OpenCycleMap-e5UOyVR_.js","assets/index-DW7Z2t5A.js","assets/index-CyQPNQYN.css","assets/OpenCycleMap-Dgihpmma.css","assets/ElevationGraph-CVUfNpbg.js"])))=>i.map(i=>d[i]);
import{j as e,u as o,a as j,r as d,N as u,R as m,_ as x}from"./index-DW7Z2t5A.js";import{u as g}from"./store-8HS3gGD5.js";const f=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",fill:"currentColor",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})});function h({waypoint:s,hideMilestoneData:i,Icon:t,lastNode:n=!1}){var l;return e.jsxs("li",{style:{marginBottom:"-4pt"},children:[e.jsx("div",{className:"timeline-middle",children:t}),e.jsxs("div",{className:"timeline-end text-left flex flex-row gap-x-2 px-2 pt-2 m-0",children:[i?e.jsx(e.Fragment,{}):e.jsx("time",{className:"flex-none italic w-10",children:s.milestone>=1e3?`${(s.milestone/1e3).toFixed(0)}km`:"Start"}),e.jsxs("div",{className:"grow text-lg leading-tight",children:[e.jsx("span",{className:"font-bold",children:s.name}),(l=s.description)==null?void 0:l.split("<br>").map((r,a)=>e.jsx("p",{children:r},s.coordinates.toString()+a))]})]}),n?e.jsx(e.Fragment,{}):e.jsx("hr",{style:{zIndex:"-500",marginTop:"2pt",height:"110%"}})]})}function p({waypoints:s,styles:i}){const t=s.filter(n=>n.milestone>1e3).length<=0;return e.jsx("ul",{className:"timeline timeline-vertical timeline-snap-icon timeline-compact",children:s.sort((n,l)=>n.milestone_index-l.milestone_index).map((n,l,r)=>{let a=e.jsx(f,{});const c=`${n.style}-normal`;return c in i&&(a=e.jsx("img",{src:i[c].iconUrl,width:25,height:25})),e.jsx(h,{waypoint:n,hideMilestoneData:t,Icon:a,lastNode:l+1>=r.length},n.coordinates.toString())})})}const N={background:"bg-white"},b={background:"bg-white"},v=s=>{let i="";const t=Math.floor(s/60/60);i+=t+"h";const n=Math.floor(s/60-t*60);return i+=" "+n+"m",i},w=({path:s,theme:i})=>{let t=b;return i=="light"&&(t=N),!s||(s==null?void 0:s.statistics.total_distance)<1e3?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"badges flex-wrap w-full text-center print:text-start space-x-1",children:[s!=null&&s.statistics.duration&&(s==null?void 0:s.statistics.duration)>300?e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${t.background}`,children:[e.jsx("i",{className:"fa-solid fa-clock"}),e.jsx("span",{children:v(s==null?void 0:s.statistics.duration)})]}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${t.background}`,children:[e.jsx("i",{className:"fa-solid fa-road"}),e.jsxs("span",{children:[((s==null?void 0:s.statistics.total_distance)/1e3).toFixed(1),"km"]})]}),e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${t.background}`,children:[e.jsx("i",{className:"fa-solid fa-arrow-up"}),e.jsxs("span",{children:[s==null?void 0:s.statistics.climb.toFixed(0),"m"]})]}),e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${t.background}`,children:[e.jsx("i",{className:"fa-solid fa-arrow-down"}),e.jsxs("span",{children:[s==null?void 0:s.statistics.fall.toFixed(0),"m"]})]}),e.jsxs("div",{className:`badge py-2.5 px-2.5 space-x-1 ${t.background}`,children:[e.jsx("i",{className:"fa-solid fa-stairs"}),e.jsxs("span",{children:[((s==null?void 0:s.statistics.max_gradient)*100).toFixed(0),"%"]})]})]})};function k({folder:s,selectedId:i}){const t=o(),n=g(l=>l.kml.folders.map(r=>r.name));return e.jsxs("div",{className:"dropdown dropdown-end w-full",children:[e.jsxs("div",{tabIndex:0,role:"button",className:"btn h-auto w-full bg-transparent print:border-none print:shadow-none",children:[e.jsx("span",{className:"text-2xl font-bold",children:s.name}),e.jsx(w,{path:s.path,theme:"light"})]}),e.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 bg-base-100 rounded-box w-full",children:n.map((l,r)=>e.jsx("li",{children:e.jsx("a",{onClick:()=>t(`/folder/${r}`),className:i===r?"font-bold":"",children:l})},l))})]})}const y=m.lazy(()=>x(()=>import("./OpenCycleMap-e5UOyVR_.js"),__vite__mapDeps([0,1,2,3]))),_=m.lazy(()=>x(()=>import("./ElevationGraph-CVUfNpbg.js"),__vite__mapDeps([4,1,2])));function I(){const{folderId:s}=j();o();const[i,t,n]=g(a=>a.kml?[a.kml.folders[Number(s)],a.kml.folders.map(c=>c.path),a.kml.styles]:[void 0,void 0,void 0]);let[l,r]=d.useState(!0);return i?e.jsx("div",{className:"flex flex-row justify-center h-screen w-screen",children:e.jsxs("div",{className:"grid grid-cols-2 print:grid-cols-1 gap-10 aspect-a4-landscape",children:[e.jsx("div",{className:"print:hidden grid-1",children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"grid content-center justify-center",children:e.jsx("span",{className:"loading loading-ring loading-lg content-center align-middle"})}),children:e.jsx(y,{folder:i,paths:t,selectedWaypoint:i.waypoints[0],styles:n})})}),e.jsxs("div",{className:"grid-1",children:[e.jsx("div",{className:"text-center mb-5 mt-5",children:e.jsx(k,{folder:i,selectedId:Number(s)})}),i.path&&l?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-40 w-full mb-10",children:e.jsx(_,{path:i.path,waypoints:i.waypoints,styles:n})})}):e.jsx(e.Fragment,{}),e.jsx(p,{waypoints:i.waypoints,styles:n})]}),e.jsx("div",{className:"absolute bottom-5 right-5 print:hidden",children:e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0,onChange:a=>r(a.target.checked)}),e.jsx("span",{className:"pl-2 font-semibold",children:"HÃ¶henprofil anzeigen"})]})})]})}):e.jsx(u,{to:"/"})}export{I as FolderPage};
